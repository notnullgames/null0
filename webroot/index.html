<html>
  <head>
    <title>null0</title>
    <script type="importmap">
      {
        "imports": {
          "@easywasm/wasi": "https://esm.sh/@easywasm/wasi",
          "fflate": "https://esm.sh/fflate/esm/browser.js"
        }
      }
    </script>
    <script type="module" src="null0-cart.js"></script>
    <style>
      body {
        font-family: sans-serif;
        background: black;
        color: white;
        padding:20px;
      }
      
      #demos {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
      }

      .democard {
        border: 1px solid white;
        color: black;
        background: lightgrey;
        padding: 10px;
        border-radius: 10px;
      }

      /* When there's only one card, center it full screen */
      .democard:only-child {
        margin: auto;
        max-width: 100%;
        width: auto;
        height: auto;
        object-fit: contain;
      }

      /* Apply parent centering styles when there's only one child */
      #demos:has(.democard:only-child) {
        height: 100%;
        max-height: calc(100vh - 40px);
        justify-content: center;
        align-items: center;
      }
    </style>
  </head>
  <body>
    <!-- instead of my demo code, you could just do something like this: --> 
    <!-- <null0-cart src="carts/colorbars_c.null0"></null0-cart> -->
    <div id="demos">
    </div>
  </body>
  <script type="module">
    // this is more wonky than you need to do, but I want to automate loading whatever carts were built
    // I also wanted to handle URL hash, so I can just show 1 (better for testing a single problem) 

    let carts = []

    // handle #cart URL
    if (document.location.hash) {
      carts = [document.location.hash.slice(1) + '.null0']
    }else {
      // get list of carts (specific to my demo)
      carts = await fetch('carts/list.txt').then(r => r.text()).then(t => t.trim().split('\n'))
    }
    
    window.addEventListener('hashchange', () => {
      // reload is required to clear it out
      document.location.reload()
    })

    // load all carts
    for (const cn of carts.sort()) {
      document.getElementById('demos').innerHTML += `
        <div class="democard">
        <h3>${cn.replace('.null0', '')}</h3>
        <null0-cart src="carts/${cn}"></null0-cart>
        </div>
      `
    }
  </script>
</html>
